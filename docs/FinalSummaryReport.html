<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.40">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="mehroozh">
<meta name="author" content="gbennett90">
<meta name="author" content="faisal1000x">
<meta name="author" content="mcg219">
<meta name="dcterms.date" content="2025-05-24">

<title>How Does School Funding Distribution Impact Educational Outcomes in New York State?</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="FinalSummaryReport_files/libs/clipboard/clipboard.min.js"></script>
<script src="FinalSummaryReport_files/libs/quarto-html/quarto.js"></script>
<script src="FinalSummaryReport_files/libs/quarto-html/popper.min.js"></script>
<script src="FinalSummaryReport_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="FinalSummaryReport_files/libs/quarto-html/anchor.min.js"></script>
<link href="FinalSummaryReport_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="FinalSummaryReport_files/libs/quarto-html/quarto-syntax-highlighting-549806ee2085284f45b00abea8c6df48.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="FinalSummaryReport_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="FinalSummaryReport_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="FinalSummaryReport_files/libs/bootstrap/bootstrap-81e35ebdb4125010edbabe6010586085.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">


<link rel="stylesheet" href="style.css">
</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  
<div class="quarto-alternate-formats"><h2>Other Formats</h2><ul><li><a href="FinalSummaryReport.pdf"><i class="bi bi-file-pdf"></i>PDF</a></li></ul></div></div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">How Does School Funding Distribution Impact Educational Outcomes in New York State?</h1>
<p class="subtitle lead">An Analysis of Funding Disparities and Their Effects on Underserved Communities</p>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Authors</div>
    <div class="quarto-title-meta-contents">
             <p>mehroozh </p>
             <p>gbennett90 </p>
             <p>faisal1000x </p>
             <p>mcg219 </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">May 24, 2025</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<div class="content-box">
<section id="executive-summary" class="level2">
<h2 class="anchored" data-anchor-id="executive-summary">Executive Summary</h2>
<p>The distribution of school funding across New York State (NYS) districts is a key factor influencing student success. Funding affects many aspects of education, including class size, curriculum quality, extracurricular opportunities, and student support services. However, financial resources are unevenly distributed, often tied to local wealth and property taxes, leading to significant variation in investment across communities.</p>
<p>This project explores how these funding differences impact educational outcomes, particularly in underserved areas where students face challenges like poverty, limited enrichment programs, and aging facilities. While wealthier districts can provide a richer educational environment, schools in economically disadvantaged communities often struggle with scarce resources, which can hinder student achievement and future opportunities.</p>
<p>By analyzing school spending, student performance, and community factors, this project aims to deepen understanding of how funding disparities shape education across New York State.</p>
</section>
<section id="motivation" class="level2">
<h2 class="anchored" data-anchor-id="motivation">Motivation</h2>
<p>This project was inspired by one of our team member’s personal experiences growing up in New York and attending public school. Their educational journey revealed how insufficient school funding can have a direct impact on the quality of instruction, the availability of academic support, and overall student development. Their school lacked extracurricular programs, tutoring services, and other critical resources, while teachers were often stretched thin, unable to provide the individual attention many students needed.</p>
<p>After immigrating to the United States, our teammate was placed a grade ahead, skipping the fourth grade. While this appeared to be an academic advancement, the lack of transitional support made it difficult to catch up with unfamiliar material. As a result, they often felt stagnant in their learning, which contributed to a sense of being underprepared for the academic rigor of college.</p>
<p>These firsthand challenges helped shape our team’s collective interest in exploring the relationship between school funding and educational outcomes. We aim to better understand how disparities in funding contribute to unequal educational experiences—particularly for students in under-resourced communities.</p>
</section>
<section id="data-sources" class="level2">
<h2 class="anchored" data-anchor-id="data-sources">Data Sources</h2>
<p>To support our analysis, we drew from a variety of reliable, publicly available datasets and academic research. These sources provided a mix of quantitative indicators—such as funding levels, test scores, and graduation rates—as well as qualitative insights into educational equity, access, and support structures. Key data sources included:</p>
<ul>
<li><p><strong>New York State Education Department (NYSED):</strong> District-level data on funding, enrollment, test scores, and graduation rates.</p></li>
<li><p><strong>Equity In Education New York (EquityInEdNY):</strong> Reports on access to advanced courses, extracurriculars, and student support across counties.</p></li>
<li><p><strong>OpenBudget.NY.gov:</strong> Details on how educational funds are allocated across NYS districts.</p></li>
<li><p><strong>NCES Peer Group Comparison Tool:</strong> Benchmarks NYS funding and performance against national peers.</p></li>
<li><p><strong>The Shanker Institute – “Does Money Matter in Education?”:</strong> Study on the impact of school finance reforms on student outcomes.</p></li>
<li><p><strong>Data.nysed.gov:</strong> Interactive tools and datasets on enrollment, post-secondary outcomes, and demographics.</p></li>
</ul>
<p>These sources collectively allowed us to analyze the relationship between school funding and student success from multiple angles, blending hard data with broader contextual understanding. This multi-source approach strengthened the depth and credibility of our findings.</p>
</section>
<section id="prior-research" class="level2">
<h2 class="anchored" data-anchor-id="prior-research">Prior Research</h2>
<p>Before diving into the NYS-specific analysis, it is important to understand what existing research reveals about this issue. The 2025 report <em>Does Money Matter in Education?</em> by the <strong>Albert Shanker Institute</strong> reinforces the connection between increased school funding and improved academic outcomes. The report finds that targeted investments in public education—particularly in low-income communities—lead to higher test scores, better student engagement, and stronger graduation rates. These improvements are especially significant for historically underfunded districts, where even modest funding increases can yield meaningful gains. In the context of New York, where school funding varies widely between districts, these findings underscore the importance of analyzing how budget disparities influence short-term academic indicators such as Regents scores, SAT/ACT performance, and GPA.</p>
<p>Further reinforcing this connection, the <strong>National Education Association’s (NEA) report</strong> <em>Money Matters</em> highlights the positive impact of school funding on student achievement, especially for minority and economically disadvantaged students. The report notes that underfunded schools often face challenges such as overcrowded classrooms, high teacher turnover, and a lack of educational resources—all of which contribute to lower academic performance. These systemic issues are particularly pronounced in New York, where some districts consistently receive fewer resources than others. As this analysis will demonstrate, variations in school funding are directly tied to short-term academic metrics. Understanding these relationships is essential to advocating for more equitable funding policies that support early student success and reduce educational gaps across the state.</p>
<p>We have used this research work’s findings to continue with our research work and findings collected in these were really good to give us directions.</p>
<hr>
</section>
<section id="research-questions-analytical-findings" class="level2">
<h2 class="anchored" data-anchor-id="research-questions-analytical-findings">Research Questions &amp; Analytical Findings</h2>
<div id="fig-research-overview" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-research-overview-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="images/image1.png" class="img-fluid figure-img" style="width:100.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-research-overview-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;1: Research Framework and Sub-Questions Overview
</figcaption>
</figure>
</div>
<section id="what-is-the-correlation-between-funding-levels-and-student-academic-success-e.g.-test-scores-graduation-rates" class="level3">
<h3 class="anchored" data-anchor-id="what-is-the-correlation-between-funding-levels-and-student-academic-success-e.g.-test-scores-graduation-rates">1. What is the correlation between funding levels and student academic success (e.g., test scores, graduation rates)?</h3>
<p>This analysis investigates how differences in school funding influence educational outcomes, with a focus on economically challenged communities. By examining data on per-student spending, poverty rates, test scores, and graduation rates, it becomes clear that districts with higher funding generally experience stronger student performance and greater access to advanced coursework and extracurricular opportunities.</p>
<p>Conversely, districts with lower funding often struggle to provide these quality educational resources. A consistent pattern emerged showing that districts serving higher-poverty populations typically receive less funding per student, highlighting a concerning mismatch between need and resource allocation.</p>
<p>While increased funding is strongly associated with improved academic outcomes—such as higher proficiency in reading and math—student achievement is shaped by a complex set of factors, including social, demographic, and community influences. Moreover, districts that exercise greater local control over their funding tend to perform better, indicating that not only the amount but also the management and allocation of resources are critical to supporting student success.</p>
<p>Effective investments in instructional quality, student support services, and efforts to reduce class sizes further contribute to positive outcomes. Ultimately, while equitable funding is essential, it is only one part of a broader set of factors that together determine educational success across diverse school districts.</p>
</section>
<section id="how-do-funding-differences-affect-access-to-advanced-coursework-and-college-prep-programs" class="level3">
<h3 class="anchored" data-anchor-id="how-do-funding-differences-affect-access-to-advanced-coursework-and-college-prep-programs">2. How do funding differences affect access to advanced coursework and college prep programs?</h3>
<p>Advanced coursework and college preparation programs like AP classes, dual enrollment sources, SAT prep practices, and college counseling departments are quite essential stepping stones for students aspiring to succeed in higher education and make career plans in this competitive world. But the availability of these programs is <strong>far from equal across New York State</strong>. The analysis we have done reveals a sharp divide between wealthier, well-funded counties and underfunded, underserved districts around the NY state.</p>
<p>The EquityInEdNY data underscores this disparity: schools in the bottom 20% of funding per student offer roughly <strong>40% fewer AP and honors courses</strong> compared to <strong>their more affluent counterparts</strong>. These unfairly funded schools often face teacher shortages, outdated instructional materials, and problems to support specialized programs that require additional credentials or certification.</p>
<p>Here is one example for the same: the data visualizations for <strong>Rockland</strong>, <strong>Dutchess</strong>, <strong>Suffolk</strong>, and <strong>New York</strong> counties clearly reflect this divide. New York County, which receives the highest funding and has the most schools (over 9,000), leads in both the <strong>total number of schools offering advanced coursework</strong> and <strong>college prep programming</strong>, as well as in <strong>total funding allocated</strong>—exceeding <strong>$35 million</strong>. In contrast, counties like Dutchess and Rockland, while still funded relatively well compared to rural districts, show a substantially smaller presence of these opportunities.</p>
</section>
<section id="what-is-the-correlation-between-funding-levels-and-long-term-student-outcomes-e.g.-college-enrollment-employment" class="level3">
<h3 class="anchored" data-anchor-id="what-is-the-correlation-between-funding-levels-and-long-term-student-outcomes-e.g.-college-enrollment-employment">3. What is the correlation between funding levels and long-term student outcomes (e.g., college enrollment, employment)?</h3>
<p>New York State, while one of the top spenders on public education nationally, faces persistent disparities in how school funding is distributed. Wealthier districts typically receive $2,000 to $3,000 more per student than poorer districts due to an overreliance on local property taxes and outdated funding formulas. This imbalance results in a significant resource gap that directly affects students’ educational experiences and opportunities.</p>
<p>Underfunded schools often lack experienced teachers, advanced coursework such as AP classes, updated technology, and robust college or career counseling services. These deficiencies contribute to lower test scores, reduced graduation rates, and weaker college preparedness among students in these districts. The consequences extend beyond high school—fewer students from underfunded schools enroll in or complete college, and those who do often face underemployment, particularly in high-demand fields.</p>
<p>Equitable funding has been shown to improve student outcomes, especially for those from low-income backgrounds. Increased investment in disadvantaged schools leads to measurable gains in academic performance, college success, and lifetime earnings. Closing the funding gap is not only essential for educational equity, but also for promoting long-term social and economic mobility across New York State.</p>
</section>
<section id="how-does-the-proportional-funding-of-student-and-staff-support-services-impact-student-success" class="level3">
<h3 class="anchored" data-anchor-id="how-does-the-proportional-funding-of-student-and-staff-support-services-impact-student-success">4. How does the proportional funding of Student and Staff Support Services impact student success?</h3>
<p>One of the most insightful aspects of our analysis focused on the allocation to student and staff support services—counselors, social workers, nurses, and mental health professionals. This part of this project would not ever have existed in the first place if it wasn’t for the presence of these professionals in a school setting.</p>
<p>While our overall analysis unfortunately did not yield any immediately visible strong ties between graduation rates and the relative level of funding for student and staff support services, one particular finding of interest did appear to be universally eminent.</p>
<p>Our finding of interest was that, across all levels of relative overall funding, schools with the highest proportion of Staff and Student Support funding yielded the highest Regents and Advanced Regents Diploma rates. The difference in outcomes between districts that allocated at least 8% of their budget to support services versus those allocating less than 4% was substantial—up to 12 percentage points in graduation metrics.</p>
<p>While the exact value of a regents or advanced regents diploma is somewhat unknown, there is an obvious tie to a higher chance of both college admission and college success.</p>
</section>
</section>
<section id="connecting-back-to-the-overarching-question" class="level2">
<h2 class="anchored" data-anchor-id="connecting-back-to-the-overarching-question">Connecting Back to the Overarching Question</h2>
<p>Each of these analyses ties directly into our central question: how funding impacts educational outcomes. The evidence is clear: funding does matter—and not just in total quantity but in how it is allocated. Strategic investment in enrichment programs and support services can yield measurable academic and social benefits. Furthermore, the long-term impact on college access and labor market success reaffirms the critical role that equitable funding plays in leveling the playing field.</p>
</section>
<section id="policy-implications-and-recommendations" class="level2">
<h2 class="anchored" data-anchor-id="policy-implications-and-recommendations">Policy Implications and Recommendations</h2>
<p>From our findings, several policy directions emerge:</p>
<ul>
<li><p><strong>Modernize Funding Formulas</strong>: NYS should revise the Foundation Aid formula to better account for cost-of-living differences and poverty indices.</p></li>
<li><p><strong>Strengthen Accountability</strong>: Implement a statewide reporting system that tracks how funds are allocated within each district, especially to instructional and support services.</p></li>
<li><p><strong>Targeted Funding Boosts</strong>: Increase state aid to underperforming districts with conditions tied to improvements in program offerings and staff hiring.</p></li>
<li><p><strong>Invest in Support Services</strong>: Make mental health, counseling, and career guidance a top funding priority across all districts.</p></li>
<li><p><strong>Expand College Prep Access</strong>: Provide grants for AP teacher training, dual enrollment programs, and testing fee waivers in low-income schools.</p></li>
</ul>
</section>
<section id="suggestions-for-future-work" class="level2">
<h2 class="anchored" data-anchor-id="suggestions-for-future-work">Suggestions for Future Work</h2>
<p>When allocating school funding, it’s crucial to track how the money is used rather than just distributing it without oversight. Analyzing how funds are allocated within schools—such as to departments, clubs, athletics, and materials—ensures transparency and helps reveal how funding impacts educational outcomes across New York State.</p>
<ul>
<li><p>Modernize the Foundation Aid formula to reflect up-to-date demographic and economic data.</p></li>
<li><p>Require detailed tracking of intra-school spending, including departmental, extracurricular, and instructional allocations.</p></li>
<li><p>Implement a statewide equity dashboard to monitor per-student funding, absenteeism, graduation rates, and performance outcomes.</p></li>
<li><p>Tie funding to accountability metrics, such as improvements in test scores, attendance, and post-secondary success.</p></li>
<li><p>Invest early in K–3 reading and math programs to close learning gaps before they widen.</p></li>
<li><p>Expand wraparound services—mental health care, housing stability support, and college counseling.</p></li>
<li><p>Enforce intra-district equity rules, ensuring that high-need schools receive proportionally more funding and support.</p></li>
</ul>
</section>
<section id="references" class="level2">
<h2 class="anchored" data-anchor-id="references">References</h2>
<ol type="1">
<li><p>Equity in Education New York. Course Access Data. <a href="https://equityinedny.edtrust.org/course-access/" class="uri">https://equityinedny.edtrust.org/course-access/</a></p></li>
<li><p>New York State Education Department. Enrollment and Staff Statistics. <a href="https://www.p12.nysed.gov/irs/statistics/enroll-n-staff/home.html" class="uri">https://www.p12.nysed.gov/irs/statistics/enroll-n-staff/home.html</a></p></li>
<li><p>New York State Education Department. Higher Education Enrollment Data. <a href="https://data.nysed.gov/highered-enrollment.php?year=2024&amp;county=13" class="uri">https://data.nysed.gov/highered-enrollment.php?year=2024&amp;county=13</a></p></li>
<li><p>New York State Education Department. District Profiles. <a href="https://data.nysed.gov/profile.php?county=13" class="uri">https://data.nysed.gov/profile.php?county=13</a></p></li>
<li><p>Albert Shanker Institute. Does Money Matter in Education? <a href="https://www.shankerinstitute.org/resource/does-money-matter-in-education" class="uri">https://www.shankerinstitute.org/resource/does-money-matter-in-education</a></p></li>
<li><p>National Center for Education Statistics. Peer Group Data. <a href="https://nces.ed.gov/edfin/search/peergroupdata.asp" class="uri">https://nces.ed.gov/edfin/search/peergroupdata.asp</a></p></li>
<li><p>New York State Division of Budget. School Finance Transparency. <a href="https://openbudget.ny.gov/sft/sft-districts.html" class="uri">https://openbudget.ny.gov/sft/sft-districts.html</a></p></li>
<li><p>Citizens Budget Commission. More Money, Little Accountability. <a href="https://cbcny.org/research/more-money-little-accountability" class="uri">https://cbcny.org/research/more-money-little-accountability</a></p></li>
<li><p>EdTrust New York. School District Investment Data Tool. <a href="https://newyork.edtrust.org/online-data-tool-allows-users-to-explore-how-new-york-school-districts-are-investing-resources/" class="uri">https://newyork.edtrust.org/online-data-tool-allows-users-to-explore-how-new-york-school-districts-are-investing-resources/</a></p></li>
<li><p>New York State Office of the State Comptroller. Elementary and Secondary Education Finance Report. <a href="https://www.osc.ny.gov/reports/finance/2023-fcr/elementary-and-secondary-education" class="uri">https://www.osc.ny.gov/reports/finance/2023-fcr/elementary-and-secondary-education</a></p></li>
<li><p>National Assessment of Educational Progress. Nations Report Card. <a href="https://www.nationsreportcard.gov/" class="uri">https://www.nationsreportcard.gov/</a></p></li>
<li><p>The Century Foundation. Boosting Educational Outcomes Through School Finance Reform. <a href="https://tcf.org/content/report/boosting-educational-outcomes-through-school-finance-reform/" class="uri">https://tcf.org/content/report/boosting-educational-outcomes-through-school-finance-reform/</a></p></li>
<li><p>New York Post. Study Reveals NYC Public School Student Chronic Absence. <a href="https://nypost.com/2025/03/06/us-news/bombshell-study-reveals-300k-nyc-public-school-students-nearly-35-chronically-absent-as-grades-plummet-spending-surges/" class="uri">https://nypost.com/2025/03/06/us-news/bombshell-study-reveals-300k-nyc-public-school-students-nearly-35-chronically-absent-as-grades-plummet-spending-surges/</a></p></li>
<li><p>Education Law Center. A Tale of Two States: Equity Outperforms Inequity. <a href="https://edlawcenter.org/a-tale-of-two-states-equity-outperforms-inequity/" class="uri">https://edlawcenter.org/a-tale-of-two-states-equity-outperforms-inequity/</a></p></li>
</ol>
</section>
<section id="individual-reports" class="level2">
<h2 class="anchored" data-anchor-id="individual-reports">Individual Reports</h2>
<p><a href="https://faisal1000x.github.io/STA9750-2025-SPRING/individual_report.html" class="uri">https://faisal1000x.github.io/STA9750-2025-SPRING/individual_report.html</a></p>
<p><a href="https://gbennett90.github.io/STA9750-2025-SPRING/IndividualFinalProject.html" class="uri">https://gbennett90.github.io/STA9750-2025-SPRING/IndividualFinalProject.html</a></p>
<p><a href="https://mcg219.github.io/STA9750-2025-SPRING/final_individual_report.html" class="uri">https://mcg219.github.io/STA9750-2025-SPRING/final_individual_report.html</a></p>
<p><a href="https://mehroozh.github.io/STA9750-2025-SPRING/final_sta_individual_project.html" class="uri">https://mehroozh.github.io/STA9750-2025-SPRING/final_sta_individual_project.html</a></p>
</section>
</div>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>